<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>云诊断登陆</title>
	<!-- Meta tags -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<!-- //Meta tags -->
	<link rel="stylesheet" th:href="@{/css/login/style.css}" type="text/css" media="all"><!-- Style-CSS -->

	<link th:href="@{/css/login/font-awesome.css}" rel="stylesheet"><!-- font-awesome-icons -->

	<link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.css}">
	<link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap-theme.css}">

	<link rel="stylesheet" th:href="@{/layui/css/layui.css}" media="all">
	<link rel="stylesheet" th:href="@{/style/admin.css}" media="all">
	<link rel="stylesheet" th:href="@{/style/login.css}" media="all">

</head>

<body>
	<section class="w3l-form-36">
		<div class="form-36-mian section-gap">
			<div class="wrapper">
				<div class="form-inner-cont">
					<h3>云诊断平台注册</h3>
					<form class="signin-form">
						<div class="form-input">
							<span class="glyphicon glyphicon-phone" aria-hidden="true"></span>
							<input type="text" id="phone" name="phone" placeholder="手机号" required=""/>
						</div>
						<div class="form-input">
							<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
							<input type="password" id="password" name="password" placeholder="密码" required=""/>
						</div>
						<div class="form-input">
							<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
							<input type="password" id="rePassword" name="rePassword" placeholder="密码" required=""/>
						</div>
						<div class="form-input">
							<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
							<input type="text" id="idCard" name="idCard" placeholder="身份证" required=""/>
						</div>
						<div class="form-input">
							<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
							<input type="text" id="name" name="name" placeholder="真实姓名" required=""/>
						</div>
						<div class="form-input">
							<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
							<input type="text" id="mail" name="mail" placeholder="邮箱" required=""/>
						</div>
						<div class="form-input">
							<select id="role" class="select" style="width: 310px; height: 40px">
								<option value="2">医生</option>
								<option value="1">用户</option>
							</select>
						</div>
						<div class="form-input">
							<select id="sex" name="sex" style="width: 310px; height: 40px">
								<option value="1">男</option>
								<option value="2">女</option>
							</select>
						</div>
						<div class="login-remember d-grid">
							<button class="btn theme-button" id="registerButton" type="button">注册</button>
						</div>
					</form>
					<p class="signup">已经有账号了?<a href="/diagnose/login" class="signuplink">去登陆</a></p>
				</div>
			</div>
		</div>
	</section>


</body>
<script th:src="@{/jquery/jquery-3.5.1.min.js}"></script>

<script>

		$("#registerButton").click(function () {
			$.ajax({
				url: '/user/register',
				data: JSON.stringify(
						{'phone': $("#phone").val(), 'password': $("#password").val(),
							'rePassword': $("#rePassword").val(), 'idCard': $("#idCard").val(), 'mail': $("#mail").val(),
						'name': $("#name").val(), 'role': $("#role").val(), 'sex': $("#sex").val()}
				),
				type: 'post',
				contentType: 'application/json',
				success: function (result) {
					var message = result.msg;
					if (message === "注册成功") {
						alert(message);
						window.location.href = "/diagnose/login";
						return false;
					} else {
						alert(message);
						window.location.href = "/diagnose/register";
						return false;
					}

				}
			});
			return false;
		});
</script>

</html>